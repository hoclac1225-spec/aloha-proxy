// prisma/schema.prisma

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

/*
  Model existing users
*/
model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

/*
  Session model for @shopify/shopify-app-session-storage-prisma
  - Thêm model này và chạy prisma migrate để tạo bảng `Session` trong DB.
  - Trường `data` / `onlineAccess` dùng Json để lưu payload nếu cần.
*/
model Session {
  id           String   @id @default(cuid())
  shop         String
  state        String?
  isOnline     Boolean  @default(false)
  expiresAt    DateTime?
  accessToken  String?
  scope        String?
  onlineAccess Json?      // optional: store online access info
  data         Json?      // optional: raw session payload
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@map("Session") // ánh xạ tên bảng chính xác (không bắt buộc)
}

